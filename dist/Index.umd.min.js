!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t=t||self)["lazyload-pic"]={},t.React)}(this,function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?u(t):e}function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function p(t,e){return t(e={exports:{}},e.exports),e.exports}e=e&&e.hasOwnProperty("default")?e.default:e,function(){if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=window.document;n.prototype.THROTTLE_TIMEOUT=100,n.prototype.POLL_INTERVAL=null,n.prototype.USE_MUTATION_OBSERVER=!0,n.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},n.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},n.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter(function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]})},n.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(o(window,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,r(window,"resize",this._checkForIntersections,!0),r(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),n=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(o){var r=o.element,s=i(r),a=this._rootContainsTarget(r),c=o.entry,u=t&&a&&this._computeTargetAndRootIntersection(r,n),l=o.entry=new e({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:s,rootBounds:n,intersectionRect:u});c?t&&a?this._hasCrossedThreshold(c,l)&&this._queuedEntries.push(l):c&&c.isIntersecting&&this._queuedEntries.push(l):this._queuedEntries.push(l)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(e,n){if("none"!=window.getComputedStyle(e).display){for(var o,r,s,c,u,l,f,p,h=i(e),d=a(e),m=!1;!m;){var y=null,g=1==d.nodeType?window.getComputedStyle(d):{};if("none"==g.display)return;if(d==this.root||d==t?(m=!0,y=n):d!=t.body&&d!=t.documentElement&&"visible"!=g.overflow&&(y=i(d)),y&&(o=y,r=h,s=void 0,c=void 0,u=void 0,l=void 0,f=void 0,p=void 0,s=Math.max(o.top,r.top),c=Math.min(o.bottom,r.bottom),u=Math.max(o.left,r.left),l=Math.min(o.right,r.right),p=c-s,!(h=(f=l-u)>=0&&p>=0&&{top:s,bottom:c,left:u,right:l,width:f,height:p})))break;d=a(d)}return h}},n.prototype._getRootRect=function(){var e;if(this.root)e=i(this.root);else{var n=t.documentElement,o=t.body;e={top:0,left:0,right:n.clientWidth||o.clientWidth,width:n.clientWidth||o.clientWidth,bottom:n.clientHeight||o.clientHeight,height:n.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100}),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},n.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,o=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==o)for(var r=0;r<this.thresholds.length;r++){var i=this.thresholds[r];if(i==n||i==o||i<n!=i<o)return!0}},n.prototype._rootIsInDom=function(){return!this.root||s(t,this.root)},n.prototype._rootContainsTarget=function(e){return s(this.root||t,e)},n.prototype._registerInstance=function(){},n.prototype._unregisterInstance=function(){},window.IntersectionObserver=n,window.IntersectionObserverEntry=e}function e(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function n(t,e){var n,o,r,i=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout(function(){n(),r=null},o))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(t){return t.value+t.unit}).join(" ")}function o(t,e,n,o){"function"==typeof t.addEventListener?t.addEventListener(e,n,o||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function r(t,e,n,o){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,o||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function i(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(t,e){for(var n=e;n;){if(n==t)return!0;n=a(n)}return!1}function a(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e&&e.assignedSlot?e.assignedSlot.parentNode:e}}();var h=p(function(t){!function(){var e={}.hasOwnProperty;function n(){for(var t=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)&&r.length){var s=n.apply(null,r);s&&t.push(s)}else if("object"===i)for(var a in r)e.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}),d=p(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,v=n?Symbol.for("react.scope"):60119;function _(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case o:switch(t=t.type){case l:case f:case i:case a:case s:case h:return t;default:switch(t=t&&t.$$typeof){case u:case p:case y:case m:case c:return t;default:return e}}case r:return e}}}function w(t){return _(t)===f}e.typeOf=_,e.AsyncMode=l,e.ConcurrentMode=f,e.ContextConsumer=u,e.ContextProvider=c,e.Element=o,e.ForwardRef=p,e.Fragment=i,e.Lazy=y,e.Memo=m,e.Portal=r,e.Profiler=a,e.StrictMode=s,e.Suspense=h,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===f||t===a||t===s||t===h||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p||t.$$typeof===g||t.$$typeof===b||t.$$typeof===v)},e.isAsyncMode=function(t){return w(t)||_(t)===l},e.isConcurrentMode=w,e.isContextConsumer=function(t){return _(t)===u},e.isContextProvider=function(t){return _(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===o},e.isForwardRef=function(t){return _(t)===p},e.isFragment=function(t){return _(t)===i},e.isLazy=function(t){return _(t)===y},e.isMemo=function(t){return _(t)===m},e.isPortal=function(t){return _(t)===r},e.isProfiler=function(t){return _(t)===a},e.isStrictMode=function(t){return _(t)===s},e.isSuspense=function(t){return _(t)===h}});f(d);d.typeOf,d.AsyncMode,d.ConcurrentMode,d.ContextConsumer,d.ContextProvider,d.Element,d.ForwardRef,d.Fragment,d.Lazy,d.Memo,d.Portal,d.Profiler,d.StrictMode,d.Suspense,d.isValidElementType,d.isAsyncMode,d.isConcurrentMode,d.isContextConsumer,d.isContextProvider,d.isElement,d.isForwardRef,d.isFragment,d.isLazy,d.isMemo,d.isPortal,d.isProfiler,d.isStrictMode,d.isSuspense;var m=p(function(t,e){});f(m);m.typeOf,m.AsyncMode,m.ConcurrentMode,m.ContextConsumer,m.ContextProvider,m.Element,m.ForwardRef,m.Fragment,m.Lazy,m.Memo,m.Portal,m.Profiler,m.StrictMode,m.Suspense,m.isValidElementType,m.isAsyncMode,m.isConcurrentMode,m.isContextConsumer,m.isContextProvider,m.isElement,m.isForwardRef,m.isFragment,m.isLazy,m.isMemo,m.isPortal,m.isProfiler,m.isStrictMode,m.isSuspense,p(function(t){t.exports=d});var y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}})()&&Object.assign;var v="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function _(){}function w(){}w.resetWarningCache=_;var E=p(function(t){t.exports=function(){function t(t,e,n,o,r,i){if(i!==v){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:w,resetWarningCache:_};return n.PropTypes=n,n}()});!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".container {\n  background: #fff;\n}\n\n.skeleton {\n  width: 100%;\n  height: 20px;\n  background: linear-gradient(90deg, #496eaa, #944fa8, #a8804f, #496eaa);\n  background-size: 1400% 300%;\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  animation: colorMove 20s ease infinite;\n}\n\n.skeleton1 {\n  width: 300px;\n  height: 200px;\n  background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 37%, #f2f2f2 63%);\n  background-size: 400% 100%;\n  animation: ant-skeleton-loading 1.4s ease infinite;\n}\n\n.L-skeleton1 {\n  width: 300px;\n  height: 200px;\n  background: linear-gradient(90deg, #f2f2f2 25%, #e6e6e6 37%, #f2f2f2 63%);\n  background-size: 400% 100%;\n  animation: ant-skeleton-loading 1.4s ease infinite;\n}\n\n.defaultImg {\n  width: 300px;\n  height: 200px;\n}\n\n.noShow {\n  display: none;\n}\n\n.L-container {\n  display: flex;\n  justify-content: center;\n  width: 100%;\n}\n\n.box {\n  height: 400px;\n  overflow-y: scroll;\n}\n\n.defaultImageBox {\n  display: flex;\n  justify-content: center;\n  width: 500px;\n  height: 200px;\n  margin: 20px auto;\n}\n\n@keyframes colorMove {\n  0% {\n    background-position: 0% 0%;\n  }\n  50% {\n    background-position: 50% 100%;\n  }\n  100% {\n    background-position: 100% 0%;\n  }\n}\n\n@keyframes ant-skeleton-loading {\n  0% {\n    background-position: 100% 50%;\n  }\n\n  100% {\n    background-position: 0 50%;\n  }\n}\n");var O=function(t){function o(){var t,e;n(this,o);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return i(u(e=l(this,(t=a(o)).call.apply(t,[this].concat(s)))),"state",{loaded:!1}),e}return s(o,e.Component),r(o,[{key:"render",value:function(){var t=this,n=t.state.loaded,o=t.props,r=o.img,i=o.alt,s=o.imgClassName,a=o.skeleton;return e.createElement("div",{className:"container"},n?e.createElement("img",{className:h("defaultImg",s),src:r,alt:i}):e.createElement("div",{className:h("skeleton1",a)}),e.createElement("img",{className:"noShow",src:r,alt:i,onLoad:function(){t.setState({loaded:!0})}}))}}]),o}();i(O,"propTypes",{onLoaded:E.func.isRequired,loaded:E.bool.isRequired,img:E.string.isRequired,alt:E.string.isRequired,imgClassName:E.string,skeleton:E.string}),i(O,"defaultProps",{alt:""});var I=function(t){function o(){var t,e;n(this,o);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return i(u(e=l(this,(t=a(o)).call.apply(t,[this].concat(s)))),"state",{imgBlob:[]}),i(u(e),"getBase64",function(t,e){var n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="blob",n.onload=function(t){if(200===t.target.status){var n=t.target.response,o=new FileReader;o.onloadend=function(t){e(t.target.result)},o.readAsDataURL(n)}},n.send()}),i(u(e),"callback",function(t){var n=u(e),o=n.state.imgBlob;n.setState({imgBlob:o.concat(t)})}),i(u(e),"onload",function(t){var n=u(e),o=new IntersectionObserver(function(t){t.forEach(function(t){var e=t.target;if(t.intersectionRatio<=0)return null;console.log(e.dataset.src),n.getBase64(e.dataset.src,n.callback),o.unobserve(e)})},{threshold:[.02]});t.map(function(t){return o.observe(t.current)})}),e}return s(o,e.Component),r(o,[{key:"render",value:function(){var t=this,n=t.state.imgBlob,o=t.props,r=o.alt,i=o.imgClassName,s=o.imgBoxClassName,a=o.boxClassName,c=o.imgArr,u=[],l=[];c.map(function(t,o){var r=e.createRef();return l.push(r),u.push(e.createElement("div",{className:h("defaultImageBox",s),key:o},e.createElement("img",{key:o,className:h(n.length>0?"":"L-skeleton1",i),ref:r,src:n.length>0?n[o]:"",alt:"","data-src":t.url})))});var f=e.createElement("div",{className:h("box",a)},u,e.createElement("img",{onError:function(){return t.onload(l)},src:"",alt:r}));return e.createElement("div",{className:"L-container"},f)}}]),o}();i(I,"propTypes",{imgClassName:E.string,imgBoxClassName:E.string,alt:E.string}),i(I,"defaultProps",{alt:""}),t.LazyLoadPic=I,t.PicLazyLoad=O,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.min.js.map
